{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar API_BASE = 'https://jsonplaceholder.typicode.com';\nvar DEFAULT_TIMEOUT = 5000;\nvar fetchWithTimeout = function () {\n  var _ref = _asyncToGenerator(function* (url) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var timeout = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_TIMEOUT;\n    var controller = new AbortController();\n    var id = setTimeout(function () {\n      return controller.abort();\n    }, timeout);\n    try {\n      var response = yield fetch(url, _objectSpread(_objectSpread({}, options), {}, {\n        signal: controller.signal\n      }));\n      clearTimeout(id);\n      return response;\n    } catch (error) {\n      clearTimeout(id);\n      throw error;\n    }\n  });\n  return function fetchWithTimeout(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var apiService = {\n  getUsers: function () {\n    var _getUsers = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetchWithTimeout(`${API_BASE}/users`);\n        if (!response.ok) {\n          throw new Error(`Network response was not ok: ${response.status}`);\n        }\n        return yield response.json();\n      } catch (error) {\n        console.error('API Error in getUsers:', error);\n        if (error.name === 'AbortError') {\n          throw new Error('Request timeout: Could not fetch users');\n        }\n        throw new Error(`Failed to fetch users: ${error.message}`);\n      }\n    });\n    function getUsers() {\n      return _getUsers.apply(this, arguments);\n    }\n    return getUsers;\n  }(),\n  getPosts: function () {\n    var _getPosts = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetchWithTimeout(`${API_BASE}/posts`);\n        if (!response.ok) {\n          throw new Error(`Network response was not ok: ${response.status}`);\n        }\n        return yield response.json();\n      } catch (error) {\n        console.error('API Error in getPosts:', error);\n        if (error.name === 'AbortError') {\n          throw new Error('Request timeout: Could not fetch posts');\n        }\n        throw new Error(`Failed to fetch posts: ${error.message}`);\n      }\n    });\n    function getPosts() {\n      return _getPosts.apply(this, arguments);\n    }\n    return getPosts;\n  }(),\n  createPost: function () {\n    var _createPost = _asyncToGenerator(function* (postData) {\n      try {\n        var response = yield fetchWithTimeout(`${API_BASE}/posts`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(postData)\n        });\n        if (!response.ok) {\n          throw new Error(`Network response was not ok: ${response.status}`);\n        }\n        return yield response.json();\n      } catch (error) {\n        console.error('API Error in createPost:', error);\n        if (error.name === 'AbortError') {\n          throw new Error('Request timeout: Could not create post');\n        }\n        throw new Error(`Failed to create post: ${error.message}`);\n      }\n    });\n    function createPost(_x2) {\n      return _createPost.apply(this, arguments);\n    }\n    return createPost;\n  }()\n};","map":{"version":3,"names":["API_BASE","DEFAULT_TIMEOUT","fetchWithTimeout","_ref","_asyncToGenerator","url","options","arguments","length","undefined","timeout","controller","AbortController","id","setTimeout","abort","response","fetch","_objectSpread","signal","clearTimeout","error","_x","apply","apiService","getUsers","_getUsers","ok","Error","status","json","console","name","message","getPosts","_getPosts","createPost","_createPost","postData","method","headers","body","JSON","stringify","_x2"],"sources":["/home/ms/Документы/Мобильная разработка/Код/src/services/apiService.js"],"sourcesContent":["// src/services/apiService.js - сервис для работы с внешним API с улучшенной обработкой ошибок\nconst API_BASE = 'https://jsonplaceholder.typicode.com';\n\n// Время ожидания по умолчанию (5 секунд)\nconst DEFAULT_TIMEOUT = 5000;\n\n// Функция для выполнения запроса с таймаутом\nconst fetchWithTimeout = async (url, options = {}, timeout = DEFAULT_TIMEOUT) => {\n  const controller = new AbortController();\n  const id = setTimeout(() => controller.abort(), timeout);\n  \n  try {\n    const response = await fetch(url, {\n      ...options,\n      signal: controller.signal\n    });\n    clearTimeout(id);\n    return response;\n  } catch (error) {\n    clearTimeout(id);\n    throw error;\n  }\n};\n\nexport const apiService = {\n  // Получение списка пользователей\n  async getUsers() {\n    try {\n      const response = await fetchWithTimeout(`${API_BASE}/users`);\n      if (!response.ok) {\n        throw new Error(`Network response was not ok: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('API Error in getUsers:', error);\n      if (error.name === 'AbortError') {\n        throw new Error('Request timeout: Could not fetch users');\n      }\n      throw new Error(`Failed to fetch users: ${error.message}`);\n    }\n  },\n\n  // Получение постов\n  async getPosts() {\n    try {\n      const response = await fetchWithTimeout(`${API_BASE}/posts`);\n      if (!response.ok) {\n        throw new Error(`Network response was not ok: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('API Error in getPosts:', error);\n      if (error.name === 'AbortError') {\n        throw new Error('Request timeout: Could not fetch posts');\n      }\n      throw new Error(`Failed to fetch posts: ${error.message}`);\n    }\n  },\n\n  // Создание нового поста (имитация)\n  async createPost(postData) {\n    try {\n      const response = await fetchWithTimeout(`${API_BASE}/posts`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(postData),\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Network response was not ok: ${response.status}`);\n      }\n      \n      return await response.json();\n    } catch (error) {\n      console.error('API Error in createPost:', error);\n      if (error.name === 'AbortError') {\n        throw new Error('Request timeout: Could not create post');\n      }\n      throw new Error(`Failed to create post: ${error.message}`);\n    }\n  }\n};"],"mappings":";;;;AACA,IAAMA,QAAQ,GAAG,sCAAsC;AAGvD,IAAMC,eAAe,GAAG,IAAI;AAG5B,IAAMC,gBAAgB;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,GAAG,EAA8C;IAAA,IAA5CC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IAAA,IAAEG,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGN,eAAe;IAC1E,IAAMU,UAAU,GAAG,IAAIC,eAAe,CAAC,CAAC;IACxC,IAAMC,EAAE,GAAGC,UAAU,CAAC;MAAA,OAAMH,UAAU,CAACI,KAAK,CAAC,CAAC;IAAA,GAAEL,OAAO,CAAC;IAExD,IAAI;MACF,IAAMM,QAAQ,SAASC,KAAK,CAACZ,GAAG,EAAAa,aAAA,CAAAA,aAAA,KAC3BZ,OAAO;QACVa,MAAM,EAAER,UAAU,CAACQ;MAAM,EAC1B,CAAC;MACFC,YAAY,CAACP,EAAE,CAAC;MAChB,OAAOG,QAAQ;IACjB,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdD,YAAY,CAACP,EAAE,CAAC;MAChB,MAAMQ,KAAK;IACb;EACF,CAAC;EAAA,gBAfKnB,gBAAgBA,CAAAoB,EAAA;IAAA,OAAAnB,IAAA,CAAAoB,KAAA,OAAAhB,SAAA;EAAA;AAAA,GAerB;AAED,OAAO,IAAMiB,UAAU,GAAG;EAElBC,QAAQ;IAAA,IAAAC,SAAA,GAAAtB,iBAAA,cAAG;MACf,IAAI;QACF,IAAMY,QAAQ,SAASd,gBAAgB,CAAC,GAAGF,QAAQ,QAAQ,CAAC;QAC5D,IAAI,CAACgB,QAAQ,CAACW,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,gCAAgCZ,QAAQ,CAACa,MAAM,EAAE,CAAC;QACpE;QACA,aAAab,QAAQ,CAACc,IAAI,CAAC,CAAC;MAC9B,CAAC,CAAC,OAAOT,KAAK,EAAE;QACdU,OAAO,CAACV,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9C,IAAIA,KAAK,CAACW,IAAI,KAAK,YAAY,EAAE;UAC/B,MAAM,IAAIJ,KAAK,CAAC,wCAAwC,CAAC;QAC3D;QACA,MAAM,IAAIA,KAAK,CAAC,0BAA0BP,KAAK,CAACY,OAAO,EAAE,CAAC;MAC5D;IACF,CAAC;IAAA,SAdKR,QAAQA,CAAA;MAAA,OAAAC,SAAA,CAAAH,KAAA,OAAAhB,SAAA;IAAA;IAAA,OAARkB,QAAQ;EAAA;EAiBRS,QAAQ;IAAA,IAAAC,SAAA,GAAA/B,iBAAA,cAAG;MACf,IAAI;QACF,IAAMY,QAAQ,SAASd,gBAAgB,CAAC,GAAGF,QAAQ,QAAQ,CAAC;QAC5D,IAAI,CAACgB,QAAQ,CAACW,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,gCAAgCZ,QAAQ,CAACa,MAAM,EAAE,CAAC;QACpE;QACA,aAAab,QAAQ,CAACc,IAAI,CAAC,CAAC;MAC9B,CAAC,CAAC,OAAOT,KAAK,EAAE;QACdU,OAAO,CAACV,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9C,IAAIA,KAAK,CAACW,IAAI,KAAK,YAAY,EAAE;UAC/B,MAAM,IAAIJ,KAAK,CAAC,wCAAwC,CAAC;QAC3D;QACA,MAAM,IAAIA,KAAK,CAAC,0BAA0BP,KAAK,CAACY,OAAO,EAAE,CAAC;MAC5D;IACF,CAAC;IAAA,SAdKC,QAAQA,CAAA;MAAA,OAAAC,SAAA,CAAAZ,KAAA,OAAAhB,SAAA;IAAA;IAAA,OAAR2B,QAAQ;EAAA;EAiBRE,UAAU;IAAA,IAAAC,WAAA,GAAAjC,iBAAA,YAACkC,QAAQ,EAAE;MACzB,IAAI;QACF,IAAMtB,QAAQ,SAASd,gBAAgB,CAAC,GAAGF,QAAQ,QAAQ,EAAE;UAC3DuC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,QAAQ;QAC/B,CAAC,CAAC;QAEF,IAAI,CAACtB,QAAQ,CAACW,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,gCAAgCZ,QAAQ,CAACa,MAAM,EAAE,CAAC;QACpE;QAEA,aAAab,QAAQ,CAACc,IAAI,CAAC,CAAC;MAC9B,CAAC,CAAC,OAAOT,KAAK,EAAE;QACdU,OAAO,CAACV,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChD,IAAIA,KAAK,CAACW,IAAI,KAAK,YAAY,EAAE;UAC/B,MAAM,IAAIJ,KAAK,CAAC,wCAAwC,CAAC;QAC3D;QACA,MAAM,IAAIA,KAAK,CAAC,0BAA0BP,KAAK,CAACY,OAAO,EAAE,CAAC;MAC5D;IACF,CAAC;IAAA,SAtBKG,UAAUA,CAAAQ,GAAA;MAAA,OAAAP,WAAA,CAAAd,KAAA,OAAAhB,SAAA;IAAA;IAAA,OAAV6B,UAAU;EAAA;AAuBlB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}