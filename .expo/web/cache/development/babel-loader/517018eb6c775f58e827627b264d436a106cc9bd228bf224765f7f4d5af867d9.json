{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar useStorage = function useStorage(key, defaultValue) {\n  var _useState = useState(defaultValue),\n    _useState2 = _slicedToArray(_useState, 2),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  useEffect(function () {\n    loadData();\n  }, []);\n  useEffect(function () {\n    if (!loading) {\n      saveData();\n    }\n  }, [value]);\n  var loadData = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var storedValue = yield AsyncStorage.getItem(key);\n        if (storedValue !== null) {\n          setValue(JSON.parse(storedValue));\n        }\n      } catch (error) {\n        console.error('Ошибка загрузки:', error);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function loadData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var saveData = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        yield AsyncStorage.setItem(key, JSON.stringify(value));\n      } catch (error) {\n        console.error('Ошибка сохранения:', error);\n      }\n    });\n    return function saveData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var clearData = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        yield AsyncStorage.removeItem(key);\n        setValue(defaultValue);\n      } catch (error) {\n        console.error('Ошибка очистки:', error);\n      }\n    });\n    return function clearData() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return {\n    value: value,\n    setValue: setValue,\n    loading: loading,\n    clearData: clearData\n  };\n};\nexport default useStorage;","map":{"version":3,"names":["useState","useEffect","AsyncStorage","useStorage","key","defaultValue","_useState","_useState2","_slicedToArray","value","setValue","_useState3","_useState4","loading","setLoading","loadData","saveData","_ref","_asyncToGenerator","storedValue","getItem","JSON","parse","error","console","apply","arguments","_ref2","setItem","stringify","clearData","_ref3","removeItem"],"sources":["/home/ms/Документы/Мобильная разработка/Код/src/hooks/useStorage.js"],"sourcesContent":["// src/hooks/useStorage.js - хук для работы с AsyncStorage\nimport { useState, useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst useStorage = (key, defaultValue) => {\n  const [value, setValue] = useState(defaultValue);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  useEffect(() => {\n    if (!loading) {\n      saveData();\n    }\n  }, [value]);\n\n  const loadData = async () => {\n    try {\n      const storedValue = await AsyncStorage.getItem(key);\n      if (storedValue !== null) {\n        setValue(JSON.parse(storedValue));\n      }\n    } catch (error) {\n      console.error('Ошибка загрузки:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const saveData = async () => {\n    try {\n      await AsyncStorage.setItem(key, JSON.stringify(value));\n    } catch (error) {\n      console.error('Ошибка сохранения:', error);\n    }\n  };\n\n  const clearData = async () => {\n    try {\n      await AsyncStorage.removeItem(key);\n      setValue(defaultValue);\n    } catch (error) {\n      console.error('Ошибка очистки:', error);\n    }\n  };\n\n  return { value, setValue, loading, clearData };\n};\n\nexport default useStorage;"],"mappings":";;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,YAAY,MAAM,2CAA2C;AAEpE,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAIC,GAAG,EAAEC,YAAY,EAAK;EACxC,IAAAC,SAAA,GAA0BN,QAAQ,CAACK,YAAY,CAAC;IAAAE,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAzCG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EACtB,IAAAI,UAAA,GAA8BX,QAAQ,CAAC,IAAI,CAAC;IAAAY,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAE1BX,SAAS,CAAC,YAAM;IACdc,QAAQ,CAAC,CAAC;EACZ,CAAC,EAAE,EAAE,CAAC;EAENd,SAAS,CAAC,YAAM;IACd,IAAI,CAACY,OAAO,EAAE;MACZG,QAAQ,CAAC,CAAC;IACZ;EACF,CAAC,EAAE,CAACP,KAAK,CAAC,CAAC;EAEX,IAAMM,QAAQ;IAAA,IAAAE,IAAA,GAAAC,iBAAA,CAAG,aAAY;MAC3B,IAAI;QACF,IAAMC,WAAW,SAASjB,YAAY,CAACkB,OAAO,CAAChB,GAAG,CAAC;QACnD,IAAIe,WAAW,KAAK,IAAI,EAAE;UACxBT,QAAQ,CAACW,IAAI,CAACC,KAAK,CAACH,WAAW,CAAC,CAAC;QACnC;MACF,CAAC,CAAC,OAAOI,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;MAC1C,CAAC,SAAS;QACRT,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAAA,gBAXKC,QAAQA,CAAA;MAAA,OAAAE,IAAA,CAAAQ,KAAA,OAAAC,SAAA;IAAA;EAAA,GAWb;EAED,IAAMV,QAAQ;IAAA,IAAAW,KAAA,GAAAT,iBAAA,CAAG,aAAY;MAC3B,IAAI;QACF,MAAMhB,YAAY,CAAC0B,OAAO,CAACxB,GAAG,EAAEiB,IAAI,CAACQ,SAAS,CAACpB,KAAK,CAAC,CAAC;MACxD,CAAC,CAAC,OAAOc,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC5C;IACF,CAAC;IAAA,gBANKP,QAAQA,CAAA;MAAA,OAAAW,KAAA,CAAAF,KAAA,OAAAC,SAAA;IAAA;EAAA,GAMb;EAED,IAAMI,SAAS;IAAA,IAAAC,KAAA,GAAAb,iBAAA,CAAG,aAAY;MAC5B,IAAI;QACF,MAAMhB,YAAY,CAAC8B,UAAU,CAAC5B,GAAG,CAAC;QAClCM,QAAQ,CAACL,YAAY,CAAC;MACxB,CAAC,CAAC,OAAOkB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;MACzC;IACF,CAAC;IAAA,gBAPKO,SAASA,CAAA;MAAA,OAAAC,KAAA,CAAAN,KAAA,OAAAC,SAAA;IAAA;EAAA,GAOd;EAED,OAAO;IAAEjB,KAAK,EAALA,KAAK;IAAEC,QAAQ,EAARA,QAAQ;IAAEG,OAAO,EAAPA,OAAO;IAAEiB,SAAS,EAATA;EAAU,CAAC;AAChD,CAAC;AAED,eAAe3B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}