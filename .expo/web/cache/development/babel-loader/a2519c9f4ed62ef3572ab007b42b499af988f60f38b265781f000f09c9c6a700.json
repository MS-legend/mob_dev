{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from 'react';\nvar useApi = function useApi(url) {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  useEffect(function () {\n    var fetchData = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          setLoading(true);\n          setError(null);\n          var response = yield fetch(url);\n          if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n          }\n          var result = yield response.json();\n          setData(result);\n        } catch (err) {\n          setError(err.message);\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function fetchData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    if (url) {\n      fetchData();\n    }\n  }, [url]);\n  var refetch = function refetch() {\n    if (url) {\n      setLoading(true);\n      setError(null);\n      fetch(url).then(function (response) {\n        return response.json();\n      }).then(setData).catch(setError).finally(function () {\n        return setLoading(false);\n      });\n    }\n  };\n  return {\n    data: data,\n    loading: loading,\n    error: error,\n    refetch: refetch\n  };\n};\nexport default useApi;","map":{"version":3,"names":["useState","useEffect","useApi","url","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","fetchData","_ref","_asyncToGenerator","response","fetch","ok","Error","status","result","json","err","message","apply","arguments","refetch","then","catch","finally"],"sources":["/home/ms/Документы/Мобильная разработка/Код/src/hooks/useApi.js"],"sourcesContent":["// src/hooks/useApi.js - хук для работы с API\nimport { useState, useEffect } from 'react';\n\nconst useApi = (url) => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        const response = await fetch(url);\n        \n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        \n        const result = await response.json();\n        setData(result);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (url) {\n      fetchData();\n    }\n  }, [url]);\n\n  const refetch = () => {\n    if (url) {\n      setLoading(true);\n      setError(null);\n      \n      fetch(url)\n        .then(response => response.json())\n        .then(setData)\n        .catch(setError)\n        .finally(() => setLoading(false));\n    }\n  };\n\n  return { data, loading, error, refetch };\n};\n\nexport default useApi;"],"mappings":";;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAIC,GAAG,EAAK;EACtB,IAAAC,SAAA,GAAwBJ,QAAQ,CAAC,IAAI,CAAC;IAAAK,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,IAAI,GAAAF,UAAA;IAAEG,OAAO,GAAAH,UAAA;EACpB,IAAAI,UAAA,GAA8BT,QAAQ,CAAC,IAAI,CAAC;IAAAU,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAC1B,IAAAG,UAAA,GAA0Bb,QAAQ,CAAC,IAAI,CAAC;IAAAc,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAAjCE,KAAK,GAAAD,UAAA;IAAEE,QAAQ,GAAAF,UAAA;EAEtBb,SAAS,CAAC,YAAM;IACd,IAAMgB,SAAS;MAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;QAC5B,IAAI;UACFP,UAAU,CAAC,IAAI,CAAC;UAChBI,QAAQ,CAAC,IAAI,CAAC;UAEd,IAAMI,QAAQ,SAASC,KAAK,CAAClB,GAAG,CAAC;UAEjC,IAAI,CAACiB,QAAQ,CAACE,EAAE,EAAE;YAChB,MAAM,IAAIC,KAAK,CAAC,uBAAuBH,QAAQ,CAACI,MAAM,EAAE,CAAC;UAC3D;UAEA,IAAMC,MAAM,SAASL,QAAQ,CAACM,IAAI,CAAC,CAAC;UACpClB,OAAO,CAACiB,MAAM,CAAC;QACjB,CAAC,CAAC,OAAOE,GAAG,EAAE;UACZX,QAAQ,CAACW,GAAG,CAACC,OAAO,CAAC;QACvB,CAAC,SAAS;UACRhB,UAAU,CAAC,KAAK,CAAC;QACnB;MACF,CAAC;MAAA,gBAlBKK,SAASA,CAAA;QAAA,OAAAC,IAAA,CAAAW,KAAA,OAAAC,SAAA;MAAA;IAAA,GAkBd;IAED,IAAI3B,GAAG,EAAE;MACPc,SAAS,CAAC,CAAC;IACb;EACF,CAAC,EAAE,CAACd,GAAG,CAAC,CAAC;EAET,IAAM4B,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;IACpB,IAAI5B,GAAG,EAAE;MACPS,UAAU,CAAC,IAAI,CAAC;MAChBI,QAAQ,CAAC,IAAI,CAAC;MAEdK,KAAK,CAAClB,GAAG,CAAC,CACP6B,IAAI,CAAC,UAAAZ,QAAQ;QAAA,OAAIA,QAAQ,CAACM,IAAI,CAAC,CAAC;MAAA,EAAC,CACjCM,IAAI,CAACxB,OAAO,CAAC,CACbyB,KAAK,CAACjB,QAAQ,CAAC,CACfkB,OAAO,CAAC;QAAA,OAAMtB,UAAU,CAAC,KAAK,CAAC;MAAA,EAAC;IACrC;EACF,CAAC;EAED,OAAO;IAAEL,IAAI,EAAJA,IAAI;IAAEI,OAAO,EAAPA,OAAO;IAAEI,KAAK,EAALA,KAAK;IAAEgB,OAAO,EAAPA;EAAQ,CAAC;AAC1C,CAAC;AAED,eAAe7B,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}